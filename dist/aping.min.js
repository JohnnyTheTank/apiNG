"use strict";var apingApp=angular.module("jtt_aping",[]).directive("aping",["apingDefaultSettings","apingUtilityHelper",function(e,t){return{restrict:"E",replace:"false",scope:{type:"@",items:"@",maxItems:"@",orderBy:"@",orderReverse:"@"},controller:function(r){r.results=[],this.getAppSettings=function(){return{type:r.type||e.type,items:r.items||e.items,maxItems:r.maxItems||e.maxItems,orderBy:r.orderBy||e.orderBy,orderReverse:r.orderReverse||e.orderReverse}},this.concatToResults=function(e){r.results=r.results.concat(e),this.getAppSettings().orderBy&&(r.results.sort(t.sortArrayByProperty(this.getAppSettings().orderBy)),(this.getAppSettings().orderReverse===!0||"true"==this.getAppSettings().orderReverse)&&r.results.reverse()),this.getAppSettings().maxItems>0&&r.results.length>this.getAppSettings().maxItems&&(r.results=r.results.splice(0,this.getAppSettings().maxItems)),r.$broadcast("resultMerged")}},templateUrl:function(t,r){return r.templateUrl||e.templateUrl}}}]);apingApp.service("apingTimeHelper",[function(){this.getTimestampFromDateString=function(e,t,r){if((!t||isNaN(t))&&(t=1),(!r||isNaN(r))&&(r=0),e){var s=e.split(/[^0-9]/);try{return parseInt(Math.round(new Date(s[0],s[1]-1,s[2],s[3],s[4],s[5])/1e3*t)+r)}catch(i){}}return!1},this.getConvertedTimestamp=function(e){var t=new Date(1e3*e),r=t.getFullYear(),s=("0"+(t.getMonth()+1)).slice(-2),i=("0"+t.getDate()).slice(-2),n=t.getHours(),a=n,u=("0"+t.getMinutes()).slice(-2),o="AM",p;return n>12?(a=n-12,o="PM"):12===n?(a=12,o="PM"):0==n&&(a=12),p=r+"-"+s+"-"+i+", "+a+":"+u+" "+o}}]).service("apingUtilityHelper",[function(e){this.parseJsonFromAttributes=function(t,r){if("string"!=typeof t||!t)return[];var s=[],i=$.parseJSON(t.replace(/'/g,'"'));return angular.forEach(i,function(t,i){t.platform=r;var n=e.getNew("request",t);s.push(n)}),s},this.getYoutubeIdFromUrl=function(e){var t=/^.*(?:(?:youtu\.be\/|v\/|vi\/|u\/\w\/|embed\/)|(?:(?:watch)?\?v(?:i)?=|\&v(?:i)?=))([^#\&\?]*).*/;return e.match(t)[1]||!1},this.getYoutubeImageFromId=function(e,t){switch(t){case"default":case"maxresdefault":case"mqdefault":case"sddefault":return"https://img.youtube.com/vi/"+e+"/"+t+".jpg";break;case"hqdefault":default:return"https://img.youtube.com/vi/"+e+"/hqdefault.jpg"}return!1},this.sortArrayByProperty=function(e){var t=1;return"-"===e[0]&&(t=-1,e=e.substr(1)),function(r,s){var i=r[e]<s[e]?-1:r[e]>s[e]?1:0;return i*t}}}]),apingApp.service("apingInputObjects",["apingDefaultSettings",function(e){this.getNew=function(t,r){var s={};switch(t){case"request":s=$.extend(!0,{type:e.type,items:e.items},r)}return s}}]),apingApp.service("apingOutputObjects",[function(){this.getNew=function(e,t){var r={};switch(e){case"social":r={platform:t,blog_name:!1,blog_id:!1,blog_link:!1,type:!1,timestamp:!1,post_url:!1,intern_id:!1,text:!1,caption:!1,img_url:!1,img_isSmall:!1,source:!1,likes:!1,shares:!1,comments:!1};break;case"video":r={platform:t,blog_name:!1,blog_id:!1,blog_link:!1,timestamp:!1,post_url:!1,intern_id:!1,text:!1,caption:!1,img_url:!1,img_isSmall:!1,source:!1,markup:!1,likes:!1,shares:!1,comments:!1};break;case"image":r={platform:t,blog_name:!1,blog_id:!1,blog_link:!1,timestamp:!1,post_url:!1,intern_id:!1,text:!1,caption:!1,img_url:!1,img_isSmall:!1,source:!1,likes:!1,shares:!1,comments:!1}}return r}}]);