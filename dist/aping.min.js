
/*! aping 15-11-2015 */
"use strict";var apingApp=angular.module("jtt_aping",[]).directive("aping",["apingDefaultSettings","apingUtilityHelper",function(a,b){return{restrict:"E",replace:"false",scope:{type:"@",items:"@",maxItems:"@",orderBy:"@",orderReverse:"@"},controller:["$scope",function(c){c.results=[],this.getAppSettings=function(){return{type:c.type||a.type,items:c.items||a.items,maxItems:c.maxItems||a.maxItems,orderBy:c.orderBy||a.orderBy,orderReverse:c.orderReverse||a.orderReverse}},this.concatToResults=function(a){c.results=c.results.concat(a),this.getAppSettings().orderBy&&(c.results.sort(b.sortArrayByProperty(this.getAppSettings().orderBy)),(this.getAppSettings().orderReverse===!0||"true"==this.getAppSettings().orderReverse)&&c.results.reverse()),this.getAppSettings().maxItems>0&&c.results.length>this.getAppSettings().maxItems&&(c.results=c.results.splice(0,this.getAppSettings().maxItems)),c.$broadcast("resultMerged")}}],templateUrl:function(b,c){return c.templateUrl||a.templateUrl}}}]);apingApp.service("apingTimeHelper",function(){this.getTimestampFromDateString=function(a,b,c){if((!b||isNaN(b))&&(b=1),(!c||isNaN(c))&&(c=0),a){var d=a.split(/[^0-9]/);try{return parseInt(Math.round(new Date(d[0],d[1]-1,d[2],d[3],d[4],d[5])/1e3*b)+c)}catch(e){}}return!1},this.getConvertedTimestamp=function(a){var b,c=new Date(1e3*a),d=c.getFullYear(),e=("0"+(c.getMonth()+1)).slice(-2),f=("0"+c.getDate()).slice(-2),g=c.getHours(),h=g,i=("0"+c.getMinutes()).slice(-2),j="AM";return g>12?(h=g-12,j="PM"):12===g?(h=12,j="PM"):0==g&&(h=12),b=d+"-"+e+"-"+f+", "+h+":"+i+" "+j}}).service("apingUtilityHelper",["apingInputObjects",function(a){this.parseJsonFromAttributes=function(b,c){if("string"!=typeof b||!b)return[];var d=[],e=$.parseJSON(b.replace(/'/g,'"'));return angular.forEach(e,function(b,e){b.platform=c;var f=a.getNew("request",b);d.push(f)}),d},this.getYoutubeIdFromUrl=function(a){var b=/^.*(?:(?:youtu\.be\/|v\/|vi\/|u\/\w\/|embed\/)|(?:(?:watch)?\?v(?:i)?=|\&v(?:i)?=))([^#\&\?]*).*/;return a.match(b)[1]||!1},this.getYoutubeImageFromId=function(a,b){switch(b){case"default":case"maxresdefault":case"mqdefault":case"sddefault":return"https://img.youtube.com/vi/"+a+"/"+b+".jpg";case"hqdefault":default:return"https://img.youtube.com/vi/"+a+"/hqdefault.jpg"}return!1},this.sortArrayByProperty=function(a){var b=1;return"-"===a[0]&&(b=-1,a=a.substr(1)),function(c,d){var e=c[a]<d[a]?-1:c[a]>d[a]?1:0;return e*b}}}]),apingApp.service("apingInputObjects",["apingDefaultSettings",function(a){this.getNew=function(b,c){var d={};switch(b){case"request":d=$.extend(!0,{type:a.type,items:a.items},c)}return d}}]),apingApp.service("apingOutputObjects",[function(){this.getNew=function(a,b){var c={};switch(a){case"social":c={platform:b,blog_name:!1,blog_id:!1,blog_link:!1,type:!1,timestamp:!1,post_url:!1,intern_id:!1,text:!1,caption:!1,img_url:!1,img_isSmall:!1,source:!1,likes:!1,shares:!1,comments:!1,position:!1};break;case"video":c={platform:b,blog_name:!1,blog_id:!1,blog_link:!1,timestamp:!1,post_url:!1,intern_id:!1,text:!1,caption:!1,img_url:!1,img_isSmall:!1,source:!1,markup:!1,likes:!1,shares:!1,comments:!1,position:!1};break;case"image":c={platform:b,blog_name:!1,blog_id:!1,blog_link:!1,timestamp:!1,post_url:!1,intern_id:!1,text:!1,caption:!1,img_url:!1,img_isSmall:!1,source:!1,likes:!1,shares:!1,comments:!1,position:!1}}return c}}]);